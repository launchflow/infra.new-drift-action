name: "Infra CLI Action"
description: "Install and run the infra CLI from the infra-new PyPI package"
author: "infra-new"

branding:
  icon: terminal
  color: blue

# Define your inputs here.
inputs:
  command:
    description: 'The infra command to run (e.g., "init", "deploy", "status")'
    required: false
    default: "--help"
  working-directory:
    description: "Working directory to run the command in"
    required: false
    default: "."

runs:
  using: "composite"
  steps:
    - name: Install uv
      uses: astral-sh/setup-uv@v6

    - name: Setup Python
      uses: actions/setup-python@v4
      with:
        python-version: 3.11

    - name: Run infra command
      shell: bash
      working-directory: ${{ inputs.working-directory }}
      run: |
        uvx --from infra-new infra ${{ inputs.command }}
